{"version":3,"sources":["server.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;IAAY;;AACZ;;IAAY;;AACZ;;;;AAGA,IAAM,MAAM,SAAZ;AAEA,IAAI,GAAJ,CAAQ,WAAW,UAAX,CAAsB,EAAE,UAAU,IAAZ,EAAtB,CAAR;AAEA,IAAM,SAAS,mBAAf;AACA,IAAM,SAAS,oBAAW,MAAX,CAAf;AACA,IAAM,UAAU,QAAQ,SAAR,EAAmB,OAAnB,EAAhB;AAEA,IAAM,KAAK,IAAI,QAAQ,QAAZ,CAAqB,MAArB,CAAX;AAEA,GAAG,SAAH,CAAa,YAAA;AACX,QAAI,CAAC,MAAL,EAAa;AACX,WAAG,GAAH,CAAO,gDAAP;AAGA,gBAAQ,GAAR,CAAY,2BAAZ;AAEA,WAAG,SAAH,CAAa,YAAA;AACX,eAAG,GAAH,CAAO,gNAAP;AAMD,SAPD;AAQD,KAdD,MAeK;AACH,gBAAQ,GAAR,CAAY,gCAAZ;AACA,WAAG,IAAH,CAAQ,sBAAR,EAAgC,UAAS,GAAT,EAAc,GAAd,EAAiB;AAC/C,gBAAK,GAAL,EAAW;AACT,wBAAQ,GAAR,CAAY,SAAZ,EAAuB,GAAvB;AACD;AACF,SAJD;AAKD;AACF,CAxBD;AA0BA,IAAI,GAAJ,CAAQ,YAAR,EAAsB,UAAS,OAAT,EAAkB,QAAlB,EAA0B;AAC9C,OAAG,GAAH,CAAO,sBAAP,EAA+B,UAAS,GAAT,EAAc,IAAd,EAAkB;AAC/C,iBAAS,IAAT,CAAc,KAAK,SAAL,CAAe,IAAf,CAAd;AACD,KAFD;AAGD,CAJD;AAMA,IAAM,WAAW,IAAI,MAAJ,SAA6B,YAAA;AAC5C,YAAQ,GAAR,CAAY,mCAAmC,SAAS,OAAT,GAAmB,IAAlE;AACD,CAFgB,CAAjB","file":"server.map","sourceRoot":"../src","sourcesContent":["import * as express from 'express';\nimport * as bodyParser from 'body-parser';\nimport { existsSync } from 'fs';\nimport Database from 'better-sqlite3';\n\nconst app = express();\n\napp.use(bodyParser.urlencoded({ extended: true }));\n\nconst dbFile = './.data/sqlite.db';\nconst exists = existsSync(dbFile);\nconst sqlite3 = require('sqlite3').verbose();\n\nconst db = new sqlite3.Database(dbFile);\n\ndb.serialize(() => {\n  if (!exists) {\n    db.run(`\n      CREATE TABLE Dreams (dream TEXT)\n    `);\n    console.log('New table Dreams created!');\n    \n    db.serialize(() => {\n      db.run(`\n        INSERT INTO Dreams (dream) \n               VALUES (\"Find and count some sheep\"), \n                      (\"Climb a really tall mountain\"),\n                      (\"Wash the dishes\")\n      `);\n    });\n  }\n  else {\n    console.log('Database \"Dreams\" ready to go!');\n    db.each('SELECT * from Dreams', function(err, row) {\n      if ( row ) {\n        console.log('record:', row);\n      }\n    });\n  }\n});\n\napp.get('/getDreams', function(request, response) {\n  db.all('SELECT * from Dreams', function(err, rows) {\n    response.send(JSON.stringify(rows));\n  });\n});\n\nconst listener = app.listen(process.env.PORT, () => {\n  console.log('Your app is listening on port ' + listener.address().port);\n});\n"]}